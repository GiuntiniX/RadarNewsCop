<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8">
  <title>Central de Not√≠cias - Hoje</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #f4f4f4;
      margin: 0;
      padding: 0;
    }
    header {
      background: #222;
      color: white;
      padding: 1em;
      text-align: center;
    }
    nav, .busca, .filtros {
      text-align: center;
      margin: 1em 0;
    }
    nav button, .busca button, .filtros button {
      margin: 5px;
      padding: 0.5em 1em;
      background: #00aced;
      color: white;
      border: none;
      border-radius: 5px;
      cursor: pointer;
    }
    nav button:hover, .busca button:hover, .filtros button:hover {
      background: #0077a3;
    }
    .busca input {
      padding: 0.5em;
      width: 200px;
      border-radius: 5px;
      border: 1px solid #ccc;
    }
    .contador {
      text-align: center;
      font-weight: bold;
      margin: 1em 0;
    }
    .card {
      background: white;
      margin: 1em auto;
      padding: 1em;
      border-radius: 8px;
      box-shadow: 0 0 5px rgba(0,0,0,0.1);
      max-width: 600px;
    }
    .card h3 {
      margin: 0.5em 0;
    }
    .card p {
      color: #333;
    }
  </style>
</head>
<body>
  <header>
    <h1>üóûÔ∏è Central de Not√≠cias - Hoje</h1>

    <nav id="editorias">
      <button onclick="carregarEditorias('geral')">Geral</button>
      <button onclick="carregarEditorias('mundo')">Mundo</button>
      <button onclick="carregarEditorias('politica')">Pol√≠tica</button>
      <button onclick="carregarEditorias('economia')">Economia</button>
      <button onclick="carregarEditorias('ciencia')">Ci√™ncia</button>
      <button onclick="carregarEditorias('saude')">Sa√∫de</button>
      <button onclick="carregarEditorias('tecnologia')">Tecnologia</button>
      <button onclick="carregarEditorias('esportes')">Esportes</button>
      <button onclick="carregarEditorias('entretenimento')">Entretenimento</button>
    </nav>

    <div class="filtros">
      <button onclick="filtrarHoje()">Hoje</button>
      <button onclick="filtrarPassado()">Passado</button>
    </div>

    <div class="busca">
      <input type="text" id="termoBusca" placeholder="Buscar por palavra-chave">
      <button onclick="buscarPorPalavra()">Buscar</button>
    </div>

    <div class="contador" id="contador"></div>
  </header>

  <main id="noticias"></main>

  <script>
    const feeds = {
      geral: 'https://news.google.com/rss?hl=pt-BR&gl=BR&ceid=BR:pt-419',
      mundo: 'https://news.google.com/rss/headlines/section/topic/WORLD.pt_br/mundo?hl=pt-BR&gl=BR&ceid=BR:pt-419',
      politica: 'https://news.google.com/rss/search?q=pol√≠tica&hl=pt-BR&gl=BR&ceid=BR:pt-419',
      economia: 'https://news.google.com/rss/search?q=economia&hl=pt-BR&gl=BR&ceid=BR:pt-419',
      ciencia: 'https://news.google.com/rss/headlines/section/topic/SCIENCE.pt_br/ciencia?hl=pt-BR&gl=BR&ceid=BR:pt-419',
      saude: 'https://news.google.com/rss/headlines/section/topic/HEALTH.pt_br/saude?hl=pt-BR&gl=BR&ceid=BR:pt-419',
      tecnologia: 'https://news.google.com/rss/headlines/section/topic/TECHNOLOGY.pt_br/tecnologia?hl=pt-BR&gl=BR&ceid=BR:pt-419',
      esportes: 'https://news.google.com/rss/headlines/section/topic/SPORTS.pt_br/esportes?hl=pt-BR&gl=BR&ceid=BR:pt-419',
      entretenimento: 'https://news.google.com/rss/headlines/section/topic/ENTERTAINMENT.pt_br/entretenimento?hl=pt-BR&gl=BR&ceid=BR:pt-419'
    };

    let todasNoticias = [];

    function atualizarContador(qtd) {
      document.getElementById("contador").textContent = `üî¢ Total de not√≠cias exibidas: ${qtd}`;
    }

    function exibirNoticias(lista) {
      const noticias = document.getElementById("noticias");
      noticias.innerHTML = "";
      lista.forEach(item => {
        const title = item.querySelector("title").textContent;
        const link = item.querySelector("link").textContent;
        const description = item.querySelector("description").textContent;

        const card = document.createElement("div");
        card.className = "card";
        card.innerHTML = `
          <h3><a href="${link}" target="_blank">${title}</a></h3>
          <p>${description}</p>
        `;
        noticias.appendChild(card);
      });
      atualizarContador(lista.length);
    }

    function carregarEditorias(editoria) {
      const rssUrl = feeds[editoria];
      const noticias = document.getElementById("noticias");
      noticias.innerHTML = "<p>Carregando not√≠cias...</p>";
      atualizarContador(0);

      fetch(`https://api.allorigins.win/get?url=${encodeURIComponent(rssUrl)}`)
        .then(response => response.json())
        .then(data => {
          const parser = new DOMParser();
          const xml = parser.parseFromString(data.contents, "application/xml");
          todasNoticias = Array.from(xml.querySelectorAll("item"));
          exibirNoticias(todasNoticias);
        })
        .catch(err => {
          noticias.innerHTML = `<p>Erro ao carregar not√≠cias: ${err.message}</p>`;
        });
    }

    function buscarPorPalavra() {
      const termo = document.getElementById("termoBusca").value.trim();
      if (!termo) return;

      const rssBusca = `https://news.google.com/rss/search?q=${encodeURIComponent(termo)}&hl=pt-BR&gl=BR&ceid=BR:pt-419`;
      const noticias = document.getElementById("noticias");
      noticias.innerHTML = "<p>Buscando not√≠cias...</p>";
      atualizarContador(0);

      fetch(`https://api.allorigins.win/get?url=${encodeURIComponent(rssBusca)}`)
        .then(response => response.json())
        .then(data => {
          const parser = new DOMParser();
          const xml = parser.parseFromString(data.contents, "application/xml");
          todasNoticias = Array.from(xml.querySelectorAll("item"));
          exibirNoticias(todasNoticias);
        })
        .catch(err => {
          noticias.innerHTML = `<p>Erro ao buscar not√≠cias: ${err.message}</p>`;
        });
    }

    function filtrarHoje() {
      const hoje = new Date().toDateString();
      const filtradas = todasNoticias.filter(item => {
        const pubDate = new Date(item.querySelector("pubDate").textContent);
        return pubDate.toDateString() === hoje;
      });
      exibirNoticias(filtradas);
    }

    function filtrarPassado() {
      const hoje = new Date().toDateString();
      const filtradas = todasNoticias.filter(item => {
        const pubDate = new Date(item.querySelector("pubDate").textContent);
        return pubDate.toDateString() !== hoje;
      });
      exibirNoticias(filtradas);
    }

    // Carrega not√≠cias gerais ao iniciar
    carregarEditorias('geral');
  </script>
</body>
</html>
