<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8">
  <title>Central de Not√≠cias - Meu Painel</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #121212;
      color: #f0f0f0;
      margin: 0;
      padding: 0;
    }
    header {
      background: #1e1e1e;
      color: white;
      padding: 1em;
      text-align: center;
    }
    nav, .busca, .login, .painel {
      text-align: center;
      margin: 1em 0;
      flex-wrap: wrap;
    }
    nav button, .busca button, .login button, .painel button {
      margin: 5px;
      padding: 0.5em 1em;
      background: #00aced;
      color: white;
      border: none;
      border-radius: 5px;
      cursor: pointer;
    }
    nav button:hover, .busca button:hover, .login button:hover, .painel button:hover {
      background: #0077a3;
    }
    .busca input, .login input {
      padding: 0.5em;
      width: 200px;
      border-radius: 5px;
      border: 1px solid #ccc;
    }
    .contador {
      text-align: center;
      font-weight: bold;
      margin: 1em 0;
    }
    #noticias {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 1em;
      padding: 1em;
    }
    .card {
      background: #ffffff;
      color: #000000;
      padding: 1em;
      border-radius: 8px;
      box-shadow: 0 0 5px rgba(255,255,255,0.1);
    }
    .card h3 {
      margin: 0.5em 0;
    }
    .card p {
      color: #333;
    }
    .tags, .acoes {
      margin-top: 10px;
    }
    .tags button, .acoes button {
      margin-right: 5px;
      padding: 0.3em 0.6em;
      font-size: 0.8em;
      background: #444;
      color: white;
      border: none;
      border-radius: 4px;
      cursor: pointer;
    }
    .tags button.active, .acoes button.active {
      background: #00aced;
    }
    .painel-area {
      background: #1e1e1e;
      padding: 1em;
      margin: 1em auto;
      max-width: 800px;
      border-radius: 8px;
    }
    .painel-area h2 {
      color: #00aced;
    }
    @media (max-width: 600px) {
      nav button, .busca button, .login button, .painel button {
        width: 90%;
        margin: 5px auto;
        display: block;
      }
      .busca input, .login input {
        width: 90%;
      }
      #noticias {
        grid-template-columns: 1fr;
      }
    }
  </style>
</head>
<body>
  <header>
    <h1>üóûÔ∏è Central de Not√≠cias - Meu Painel</h1>

    <div class="login">
      <input type="text" id="usuario" placeholder="Seu nome ou e-mail">
      <button onclick="entrarPainel()">Entrar</button>
    </div>

    <nav id="editorias">
      <button onclick="carregarEditorias('geral')">Geral</button>
      <button onclick="carregarEditorias('mundo')">Mundo</button>
      <button onclick="carregarEditorias('politica')">Pol√≠tica</button>
      <button onclick="carregarEditorias('economia')">Economia</button>
      <button onclick="carregarEditorias('ciencia')">Ci√™ncia</button>
      <button onclick="carregarEditorias('saude')">Sa√∫de</button>
      <button onclick="carregarEditorias('tecnologia')">Tecnologia</button>
      <button onclick="carregarEditorias('esportes')">Esportes</button>
      <button onclick="carregarEditorias('entretenimento')">Entretenimento</button>
    </nav>

    <div class="busca">
      <input type="text" id="termoBusca" placeholder="Buscar por palavra-chave">
      <button onclick="buscarPorPalavra()">Buscar</button>
    </div>

    <div class="painel">
      <button onclick="mostrarBoletim()">üìÑ Gerar Boletim</button>
      <button onclick="filtrarRelevantes()">üî• Mais Relevantes</button>
    </div>

    <div class="contador" id="contador"></div>
  </header>

  <main id="painel-curadoria"></main>
  <main id="noticias"></main>

  <script>
const feeds = {
  geral: 'https://news.google.com/rss?hl=pt-BR&gl=BR&ceid=BR:pt-419',
  mundo: 'https://news.google.com/rss/headlines/section/topic/WORLD.pt_br/mundo?hl=pt-BR&gl=BR&ceid=BR:pt-419',
  politica: 'https://news.google.com/rss/search?q=pol√≠tica&hl=pt-BR&gl=BR&ceid=BR:pt-419',
  economia: 'https://news.google.com/rss/search?q=economia&hl=pt-BR&gl=BR&ceid=BR:pt-419',
  ciencia: 'https://news.google.com/rss/headlines/section/topic/SCIENCE.pt_br/ciencia?hl=pt-BR&gl=BR&ceid=BR:pt-419',
  saude: 'https://news.google.com/rss/headlines/section/topic/HEALTH.pt_br/saude?hl=pt-BR&gl=BR&ceid=BR:pt-419',
  tecnologia: 'https://news.google.com/rss/headlines/section/topic/TECHNOLOGY.pt_br/tecnologia?hl=pt-BR&gl=BR&ceid=BR:pt-419',
  esportes: 'https://news.google.com/rss/headlines/section/topic/SPORTS.pt_br/esportes?hl=pt-BR&gl=BR&ceid=BR:pt-419',
  entretenimento: 'https://news.google.com/rss/headlines/section/topic/ENTERTAINMENT.pt_br/entretenimento?hl=pt-BR&gl=BR&ceid=BR:pt-419'
};

let todasNoticias = [];
let usuarioAtual = '';

function entrarPainel() {
  const nome = document.getElementById("usuario").value.trim();
  if (!nome) return alert("Digite seu nome ou e-mail");
  usuarioAtual = nome;
  alert(`Bem-vindo, ${usuarioAtual}!`);
  carregarEditorias('geral');
  mostrarCuradoria();
}

function atualizarContador(qtd) {
  document.getElementById("contador").textContent = `üî¢ Total de not√≠cias exibidas: ${qtd}`;
}

function exibirNoticias(lista) {
  const noticias = document.getElementById("noticias");
  noticias.innerHTML = "";
  lista.forEach(item => {
    const title = item.querySelector("title").textContent;
    const link = item.querySelector("link").textContent;
    const description = item.querySelector("description").textContent;
    const id = btoa(link);

    const card = document.createElement("div");
    card.className = "card";
    card.innerHTML = `
      <h3><a href="${link}" target="_blank">${title}</a></h3>
      <p>${description}</p>
      <div class="acoes">
        <button onclick="favoritar('${id}', '${title}', '${link}')">‚≠ê Favoritar</button>
        <button onclick="destacar('${id}', '${title}', '${link}')">üìå Destacar</button>
        <button onclick="compartilhar('${link}')">üîó Compartilhar</button>
      </div>
      <div class="tags">
        <button onclick="marcarTag('${id}', 'Urgente', this)">Urgente</button>
        <button onclick="marcarTag('${id}', 'Para reuni√£o', this)">Para reuni√£o</button>
        <button onclick="marcarTag('${id}', 'Inspirador', this)">Inspirador</button>
      </div>
    `;

    const tagsSalvas = JSON.parse(localStorage.getItem(`${usuarioAtual}_tags`) || '{}');
    if (tagsSalvas[id]) {
      const buttons = card.querySelectorAll(".tags button");
      buttons.forEach(btn => {
        if (tagsSalvas[id].includes(btn.textContent)) {
          btn.classList.add("active");
        }
      });
    }

    noticias.appendChild(card);
  });
  atualizarContador(lista.length);
}

function carregarEditorias(editoria) {
  const rssUrl = feeds[editoria];
  const noticias = document.getElementById("noticias");
  noticias.innerHTML = "<p>Carregando not√≠cias...</p>";
  atualizarContador(0);

  fetch(`https://api.allorigins.win/get?url=${encodeURIComponent(rssUrl)}`)
    .then(response => response.json())
    .then(data => {
      const parser = new DOMParser();
      const xml = parser.parseFromString(data.contents, "application/xml");
      todasNoticias = Array.from(xml.querySelectorAll("item"));
      exibirNoticias(todasNoticias);
    })
    .catch(err => {
      noticias.innerHTML = `<p>Erro ao carregar not√≠cias: ${err.message}</p>`;
    });
}

function buscarPorPalavra() {
  const termo = document.getElementById("termoBusca").value.trim();
  if (!termo) return;

  const rssBusca = `https://news.google.com/rss/search?q=${encodeURIComponent(termo)}&hl=pt-BR&gl=BR&ceid=BR:pt-419`;
  const noticias = document.getElementById("noticias");
  noticias.innerHTML = "<p>Buscando not√≠cias...</p>";
  atualizarContador(0);

  fetch(`https://api.allorigins.win/get?url=${encodeURIComponent(rssBusca)}`)
    .then(response => response.json())
    .then(data => {
      const parser = new DOMParser();
      const xml = parser.parseFromString(data.contents, "application/xml");
      todasNoticias = Array.from(xml.querySelectorAll("item"));
      exibirNoticias(todasNoticias);
    })
    .catch(err => {
      noticias.innerHTML = `<p>Erro ao buscar not√≠cias: ${err.message}</p>`;
    });
}

function marcarTag(id, tag, btn) {
  if (!usuarioAtual) return alert("Fa√ßa login primeiro");
  const key = `${usuarioAtual}_tags`;
  const tags = JSON.parse(localStorage.getItem(key) || '{}');
  tags[id] = tags[id] || [];

  if (tags[id].includes(tag)) {
    tags[id] = tags[id].filter(t => t !== tag);
    btn.classList.remove("active");
  } else {
    tags[id].push(tag);
    btn.classList.add("active");
  }

  localStorage.setItem(key, JSON.stringify(tags));
}

function favoritar(id, title, link) {
  const key = `${usuarioAtual}_favoritos`;
  const favoritos = JSON.parse(localStorage.getItem(key) || '[]');
  if (!favoritos.find(f => f.id === id)) {
    favoritos.push({ id, title, link });
    localStorage.setItem(key, JSON.stringify(favoritos));
    mostrarCuradoria();
  }
}

function destacar(id, title, link) {
  const key = `${usuarioAtual}_destaques`;
  const destaques = JSON.parse(localStorage.getItem(key) || '[]');
  if (!destaques.find(d => d.id === id)) {
    destaques.push({ id, title, link });
    localStorage.setItem(key, JSON.stringify(destaques));
    mostrarCuradoria();
  }
}

function compartilhar(link) {
  navigator.clipboard.writeText(link);
  alert("Link copiado para √°rea de transfer√™ncia!");
}

function mostrarCuradoria() {
  const painel = document.getElementById("painel-curadoria");
  const favoritos = JSON.parse(localStorage.getItem(`${usuarioAtual}_favoritos`) || '[]');
  const destaques = JSON.parse(localStorage.getItem(`${usuarioAtual}_destaques`) || '[]');

  painel.innerHTML = `
    <div class="painel-area">
      <h2>üìå Meus Destaques</h2>
      ${destaques.map(d => `<p><a href="${d.link}" target="_blank">${d.title}</a></p>`).join('') || '<p>Nenhum destaque ainda.</p>'}
      <h2>‚≠ê Meus Favoritos</h2>
      ${favoritos.map(f => `<p><a href="${f.link}" target="_blank">${f.title}</a></p>`).join('') || '<p>Nenhum favorito ainda.</p>'}
    </div>
  `;
}

function mostrarBoletim() {
  const destaques = JSON.parse(localStorage.getItem(`${usuarioAtual}_destaques`) || '[]');
  if (destaques.length === 0) return alert("Nenhum destaque para gerar boletim.");
  const texto = destaques.map(d => `‚Ä¢ ${d.title}\n${d.link}`).join('\n\n');
  navigator.clipboard.writeText(texto);
  alert("Boletim copiado! Cole em seu e-mail ou documento.");
}

function filtrarRelevantes() {
  const palavrasChave = ['brasil', 'tecnologia', 'elei√ß√µes', 'economia', 'intelig√™ncia artificial'];
  const filtradas = todasNoticias.filter(item => {
    const title = item.querySelector("title").textContent.toLowerCase();
    return palavrasChave.some(p => title.includes(p));
  });
  exibirNoticias(filtradas);
}
</script>
</body>
</html>
